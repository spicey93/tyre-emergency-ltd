---
// src/pages/services/[service].astro (REFACTORED)
import ServiceLayout from "../../layouts/ServiceLayout.astro";
import { pages } from "../../data/config.json";
import slug from "../../utils/slug";
import { getProvidedServices } from "../../utils/services";

export function getStaticPaths() {
  const allServices = getProvidedServices(pages.services);

  return allServices.map((service) => ({
    params: { service: slug(service.pageTitle) },
    props: { service },
  }));
}

const { service } = Astro.props;
const {
  pageTitle,
  description,
  heroHeading,
  heroSubheading,
  mainHeading,
  mainContent,
} = service;
---

<ServiceLayout
  pageTitle={pageTitle}
  description={description}
  heroHeading={heroHeading}
  heroSubheading={heroSubheading}
  mainHeading={mainHeading}
  mainContent={mainContent}
/>