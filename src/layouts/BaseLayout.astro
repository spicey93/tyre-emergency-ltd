---
// src/layouts/BaseLayout.astro (REFACTORED)
import "../styles/main.css";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { company, social, elfsight, marketing } from "../data/config.json";
import ElfsightWidget from "../components/ElfsightWidget.astro";
import TyreBrands from "../components/TyreBrands.astro";
import CTABar from "../components/CTABar.astro";
import Testimonials from "../components/Testimonials.astro";
import { generateLocalBusinessSchema } from "../utils/schema";

const { pageTitle, description } = Astro.props;
const schema = generateLocalBusinessSchema(company, social);
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <link rel="shortcut icon" href="/public/favicon.ico" type="image/x-icon">
    <title>{pageTitle} | {company.name}</title>
    <meta name="description" content={description} />

    <!-- Schema Mark Up - Local Business -->
    <script type="application/ld+json" set:html={JSON.stringify(schema)} />
  </head>
  <body class="vh-100 d-flex flex-column">
    {elfsight.global.map((id) => <ElfsightWidget type={id} />)}
    <Header />
    <slot style="flex: 1" />
    <CTABar />
    <Footer />
    <script src="../scripts/bootstrap.min.js"></script>
    <script src='https://elfsightcdn.com/platform.js' async></script>
  </body>
</html>